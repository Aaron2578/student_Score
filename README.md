# ğŸ“ Student Score Management System (Supabase Edition)

A modern, full-stack Student Performance & Feedback platform built with **React 19**, **Vite**, **Tailwind CSS 4**, and **Supabase**.

## ğŸš€ Features

### **For Students**
- **Personal Dashboard**: View total marks, potential marks, and automatically calculated percentages.
- **Dynamic Performance Feedback**: Receive color-coded performance messages (Excellent, Good, Improvement Needed) based on score thresholds.
- **Feedback System**: Submit feedback with ratings and designations for admin review.

### **For Admins**
- **Student Management**: Full profile management including updating marks and designations.
- **Feedback Moderation**: Approve (make visible) or delete student feedbacks.
- **Real-time Analytics**: See student performance across the board with auto-calculated percentages.

### **Security & Performance**
- **Role-Based Access Control (RBAC)**: Secure separation between Admin and Student views.
- **Supabase Auth**: Secure email/password authentication.
- **Modern UI**: Styled with Tailwind CSS 4 for a premium, responsive look and feel.

---

## ğŸ› ï¸ Tech Stack

- **Frontend**: React 19, Vite, Tailwind CSS 4
- **Backend/Database**: Supabase (PostgreSQL + Auth)
- **State Management**: React Hooks (useState, useEffect)
- **API Client**: Supabase JS Client

---

## âš™ï¸ Setup Instructions

### 1. Clone the repository
```bash
git clone <your-repo-url>
cd student_score
```

### 2. Install dependencies
```bash
npm install
```

### 3. Environment Variables
Create a `.env` file in the root directory and add your Supabase credentials:
```env
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 4. Database Schema Setup
Run the following SQL in the **Supabase SQL Editor** to set up the necessary tables and relationships:

```sql
-- 1. Create profiles table
CREATE TABLE public.profiles (
  id UUID REFERENCES auth.users ON DELETE CASCADE PRIMARY KEY,
  username TEXT UNIQUE,
  role TEXT DEFAULT 'student' CHECK (role IN ('admin', 'student')),
  designation TEXT,
  total_marks INT DEFAULT 0,
  out_of INT DEFAULT 0,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 2. Create feedbacks table
CREATE TABLE public.feedbacks (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  student_username TEXT,
  text TEXT,
  rating INT,
  designation TEXT,
  visible BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);


-- 3. Enable RLS
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.feedbacks ENABLE ROW LEVEL SECURITY;

-- 4. Basic Policies
CREATE POLICY "Profiles are viewable by everyone" ON public.profiles FOR SELECT USING (true);
CREATE POLICY "Users can update own profile" ON public.profiles FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Public feedbacks are viewable by everyone" ON public.feedbacks FOR SELECT USING (true);
CREATE POLICY "Authenticated users can insert feedback" ON public.feedbacks FOR INSERT WITH CHECK (auth.role() = 'authenticated');
CREATE POLICY "Admins can update feedbacks" ON public.feedbacks FOR UPDATE USING (true);
CREATE POLICY "Admins can delete feedbacks" ON public.feedbacks FOR DELETE USING (true);


-- 5. Automate Profile Creation (Trigger)
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS trigger AS $$
BEGIN
  INSERT INTO public.profiles (id, username, designation, role)
  VALUES (
    new.id, 
    new.raw_user_meta_data->>'username', 
    new.raw_user_meta_data->>'designation',
    'student'
  );
  return new;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE PROCEDURE public.handle_new_user();


```

---

## ğŸƒ Running the App

```bash
# Start development server
npm run dev
```

The app will be available at `http://localhost:5173`.

---

## ğŸ”‘ Creating an Admin
By default, all sign-ups are assigned the `student` role. To create an admin:
1. Sign up through the app.
2. Go to your **Supabase Dashboard** -> **Table Editor** -> **profiles**.
3. Change the `role` value from `student` to `admin` for your user.

---

## ğŸ“ License
MIT
